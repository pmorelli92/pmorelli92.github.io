<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Pablo Morelli">
<meta name="description" content="Devandchill is a coding blog where I share my ideas and insights on various programming topics." />
<meta name="keywords"
    content="blog, development, programming, tech, test, kiss, yagni, autofixture, .net, go" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://devandchill.com/posts/2022/03/keep-it-simple-stupid-lessons-learned/" />


<title>
    
    Keep it simple stupid, lessons learned :: Dev &amp; Chill  — A blog about coding
    
</title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" type="text/css" href="/main.045f18da88f8cb42336977558c8919c77ba0afb78827b7a1250d971d6cfd080e.css">



    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">


<meta itemprop="name" content="Keep it simple stupid, lessons learned">
<meta itemprop="description" content="We as humans are always changing and evolving, sometimes for the best and sometimes not. In our professional life this is expected, one gains experience, learns new tools, knowns different people with different background, etc.
Back when I was working for a consultancy company in 2016 I met a wonderful person who at that time was an architect, and right now one of my best friends. Our main topic of conversation was technology, and we always dug deeper and deeper into it."><meta itemprop="datePublished" content="2022-03-15T18:30:00+01:00" />
<meta itemprop="dateModified" content="2022-03-15T18:30:00+01:00" />
<meta itemprop="wordCount" content="1586"><meta itemprop="image" content="https://devandchill.com/og-image.png"/>
<meta itemprop="keywords" content="test,kiss,yagni,autofixture,.net,go," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://devandchill.com/og-image.png"/>

<meta name="twitter:title" content="Keep it simple stupid, lessons learned"/>
<meta name="twitter:description" content="We as humans are always changing and evolving, sometimes for the best and sometimes not. In our professional life this is expected, one gains experience, learns new tools, knowns different people with different background, etc.
Back when I was working for a consultancy company in 2016 I met a wonderful person who at that time was an architect, and right now one of my best friends. Our main topic of conversation was technology, and we always dug deeper and deeper into it."/>







<meta property="article:published_time" content="2022-03-15 18:30:00 &#43;0100 CET" />







<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138171880-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-138171880-1');
</script>



    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <img src="/dev-n-chill-logo.svg" alt="Dev &amp; Chill" />
        
    </div>
</a>


        <span class="header__right">
            
            <nav class="menu">
    <ul class="menu__inner"><li><a href="/blog">The blog</a></li><li><a href="/resume">Resume</a></li><li><a href="/posts">Posts</a></li>
    </ul>
</nav>

            <span class="menu-trigger">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M0 0h24v24H0z" fill="none" />
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
                </svg>
            </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
<main class="post">

  <div class="post-info">
    <p>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="feather feather-clock">
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 16 14"></polyline>
      </svg>
      8 minutes

      
    </p>
  </div>

  <article>
    <h1 class="post-title">
      <a href="https://devandchill.com/posts/2022/03/keep-it-simple-stupid-lessons-learned/">Keep it simple stupid, lessons learned</a>
    </h1>

    

    

    

    <div class="post-content">
      <p>We as humans are always changing and evolving, sometimes for the best and sometimes not. In our professional life this is expected, one gains experience, learns new tools, knowns different people with different background, etc.</p>
<p>Back when I was working for a consultancy company in 2016 I met a wonderful person who at that time was an architect, and right now one of my best friends. Our main topic of conversation was technology, and we always dug deeper and deeper into it. Since we were both working on .NET a lot of the following words appeared at least once in every conversation: <code>patterns</code>, <code>reflection</code>, <code>expressions</code>.</p>
<p>At that time, we were enjoying a lot doing green-field projects as we could decide the foundations for each one. Deciding how to architecture your project based on architectural patterns never fails, or does it?</p>
<p>Well, the projects we did never really failed, but there was one red flag that we did not put a lot of attention at that time. The code was complex. Engineers did not fully understand what we have done or why we have done it that way. For sure, one can explain certain topics, but at some point you have to draw the line.</p>
<p>Don&rsquo;t get me wrong, complex applications are not necessarily bad, one might need to do some things preemptively in order to avoid seeing their system become a big ball of mud in a couple of months. But there is one concept that at that time I did not keep close to my heart: <code>KISS</code> and <code>YAGNI</code>.</p>
<p><em>Keep it simple stupid</em> because <em>you aren&rsquo;t gonna need it</em>. This applies to a lot of concepts, such as the creation of interfaces just because. And it also avoids premature optimization.</p>
<p>I remember one of the parts on which engineers working with us had the most problems with, the tests. Well, this might sound common as every company I have been spent at least a dozen of hours defining what should tests be, what should be tested and the difference between different types of testing.</p>
<p>This is not the case, the problems here came by misusing a framework named <code>AutoFixture</code>. This cool framework claims the following:</p>
<blockquote>
<p>AutoFixture makes it easier for developers to do Test-Driven Development by automating non-relevant Test Fixture Setup, allowing the Test Developer to focus on the essentials of each test case.</p>
</blockquote>
<p>In other words, for each test you have, it will supply random data to fill your entities so no parameter is null. Then, you can add customizations in order to provide certain value to certain parameters, so instead of having:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#8fbcbb">[Theory]</span>
</span></span><span style="display:flex;"><span><span style="color:#8fbcbb">[InlineData(2, 2, 4)]</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">void</span> TestSum<span style="color:#eceff4">(</span><span style="color:#81a1c1">int</span> value1<span style="color:#eceff4">,</span> <span style="color:#81a1c1">int</span> value2<span style="color:#eceff4">,</span> <span style="color:#81a1c1">int</span> expected<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">var</span> result <span style="color:#eceff4">=</span> Calculator<span style="color:#eceff4">.</span>Add<span style="color:#eceff4">(</span>value1<span style="color:#eceff4">,</span> value2<span style="color:#eceff4">);</span>
</span></span><span style="display:flex;"><span>    Assert<span style="color:#eceff4">.</span>Equal<span style="color:#eceff4">(</span>expected<span style="color:#eceff4">,</span> result<span style="color:#eceff4">);</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span>
</span></span></code></pre></div><p>With AutoFixture you could have the following to have random data generated:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#8fbcbb">[Theory, AutoData]</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">void</span> TestSum<span style="color:#eceff4">(</span><span style="color:#81a1c1">int</span> value1<span style="color:#eceff4">,</span> <span style="color:#81a1c1">int</span> value2<span style="color:#eceff4">,</span> <span style="color:#81a1c1">int</span> expected<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">var</span> result <span style="color:#eceff4">=</span> Calculator<span style="color:#eceff4">.</span>Add<span style="color:#eceff4">(</span>value1<span style="color:#eceff4">,</span> value2<span style="color:#eceff4">);</span>
</span></span><span style="display:flex;"><span>    Assert<span style="color:#eceff4">.</span>Equal<span style="color:#eceff4">(</span>expected<span style="color:#eceff4">,</span> result<span style="color:#eceff4">);</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span>
</span></span></code></pre></div><p>Or with customizations to indicate exactly which type of data you want for the specified fields (the others will get random data).</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#8fbcbb">[Theory]</span>
</span></span><span style="display:flex;"><span><span style="color:#8fbcbb">[InlineDefaultData(typeof(Value1Is4))]</span>
</span></span><span style="display:flex;"><span><span style="color:#8fbcbb">[InlineDefaultData(typeof(Value2Is10))]</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">void</span> TestSum<span style="color:#eceff4">(</span><span style="color:#81a1c1">int</span> value1<span style="color:#eceff4">,</span> <span style="color:#81a1c1">int</span> value2<span style="color:#eceff4">,</span> <span style="color:#81a1c1">int</span> expected<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">var</span> result <span style="color:#eceff4">=</span> Calculator<span style="color:#eceff4">.</span>Add<span style="color:#eceff4">(</span>value1<span style="color:#eceff4">,</span> value2<span style="color:#eceff4">);</span>
</span></span><span style="display:flex;"><span>    Assert<span style="color:#eceff4">.</span>Equal<span style="color:#eceff4">(</span>expected<span style="color:#eceff4">,</span> result<span style="color:#eceff4">);</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">class</span> <span style="color:#8fbcbb">Value1Is4</span> <span style="color:#eceff4">:</span> ICustomization
</span></span><span style="display:flex;"><span><span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">void</span> Customize<span style="color:#eceff4">(</span>IFixture fixture<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>        fixture<span style="color:#eceff4">.</span>Customizations<span style="color:#eceff4">.</span>Add<span style="color:#eceff4">(</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span> FilteringSpecimenBuilder<span style="color:#eceff4">(</span>
</span></span><span style="display:flex;"><span>                <span style="color:#81a1c1;font-weight:bold">new</span> FixedBuilder<span style="color:#eceff4">(</span><span style="color:#b48ead">4</span><span style="color:#eceff4">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#81a1c1;font-weight:bold">new</span> ParameterSpecification<span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">typeof</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">int</span><span style="color:#eceff4">),</span> <span style="color:#a3be8c">&#34;value1&#34;</span><span style="color:#eceff4">)));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">}</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">class</span> <span style="color:#8fbcbb">Value2Is10</span> <span style="color:#eceff4">:</span> ICustomization
</span></span><span style="display:flex;"><span><span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">void</span> Customize<span style="color:#eceff4">(</span>IFixture fixture<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>        fixture<span style="color:#eceff4">.</span>Customizations<span style="color:#eceff4">.</span>Add<span style="color:#eceff4">(</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span> FilteringSpecimenBuilder<span style="color:#eceff4">(</span>
</span></span><span style="display:flex;"><span>                <span style="color:#81a1c1;font-weight:bold">new</span> FixedBuilder<span style="color:#eceff4">(</span><span style="color:#b48ead">10</span><span style="color:#eceff4">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#81a1c1;font-weight:bold">new</span> ParameterSpecification<span style="color:#eceff4">(</span><span style="color:#81a1c1;font-weight:bold">typeof</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">int</span><span style="color:#eceff4">),</span> <span style="color:#a3be8c">&#34;value2&#34;</span><span style="color:#eceff4">)));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">}</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span>
</span></span></code></pre></div><p>Do you start seeing the complexity? While this example is not fair for AutoFixture as it really comes handier when the parameters are more than just a couple of integers, there is a problem that you have probably already noticed:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#8fbcbb">[Theory, AutoData]</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">void</span> TestSum<span style="color:#eceff4">(</span><span style="color:#81a1c1">int</span> value1<span style="color:#eceff4">,</span> <span style="color:#81a1c1">int</span> value2<span style="color:#eceff4">,</span> <span style="color:#81a1c1">int</span> expected<span style="color:#eceff4">)</span>
</span></span></code></pre></div><p>This means that the <code>expected</code> value will also be a random value. So now we cannot test this function the same way we did before and we have to do something like:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#8fbcbb">[Theory, AutoData]</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">void</span> TestSum<span style="color:#eceff4">(</span><span style="color:#81a1c1">int</span> value1<span style="color:#eceff4">,</span> <span style="color:#81a1c1">int</span> value2<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">var</span> result <span style="color:#eceff4">=</span> Calculator<span style="color:#eceff4">.</span>Add<span style="color:#eceff4">(</span>value1<span style="color:#eceff4">,</span> value2<span style="color:#eceff4">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Assert<span style="color:#eceff4">.</span>Equal<span style="color:#eceff4">(</span>value1<span style="color:#eceff4">,</span> result <span style="color:#eceff4">-</span> value2<span style="color:#eceff4">);</span>
</span></span><span style="display:flex;"><span>    Assert<span style="color:#eceff4">.</span>Equal<span style="color:#eceff4">(</span>value2<span style="color:#eceff4">,</span> result <span style="color:#eceff4">-</span> value1<span style="color:#eceff4">);</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span>
</span></span></code></pre></div><p>As we cannot predict what <code>value1</code> and <code>value2</code> are going to be, we cannot predict beforehand what the <code>result</code> is going to be. So we need to implement a way of checking that the operation we wanted to test actually worked <strong>at runtime</strong>. This is problematic as we end up adding complexity on something that should not be.</p>
<p>There are probably some use cases on which AutoFixture can be useful, but the problem is that back then we used it for everything. So for those functions that should map <code>A</code> to <code>B</code>, we ended up implementing a way to map from <code>B</code> to <code>A</code> in the test and comparing the original <code>A</code> with the actual <code>A</code> that we got from the <code>B</code> result.</p>
<p>Just for the sake of wanting to use new and cool frameworks, we ended up complicating things when we did not have a good statement to justify it. Fortunately, as time passed, we both ended up moving away from the automatic and auto-magic way of doing things.</p>
<p>When I started working with Go, everything changed for me, as the way of working was quite different. People had a mindset of not adding frameworks just because, and trying to get around with the super good standard library that the language provides. Coming from .NET it was very weird, as back then we did not even have a native JSON library and all the projects had <code>Newtonsoft.Json</code> just to begin with. This ended up in developers using a lot of frameworks most of the time. And I am not even looking at JS developers which take this to a whole other level.</p>
<p>The first time I&rsquo;ve read a Go test, I did not understand a thing. It was a test of like 100 lines of code, but the actual testing logic was very small, instead it had a lot of lines inside a list defining different test cases. This is what they call <em>table driven test</em>. Basically:</p>
<table>
<thead>
<tr>
<th>Value1</th>
<th>Value2</th>
<th>Expected</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>-3</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>10</td>
<td>10</td>
</tr>
<tr>
<td>-5</td>
<td>-7</td>
<td>-12</td>
</tr>
</tbody>
</table>
<p>In code:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">func</span> <span style="color:#88c0d0">TestAdd</span><span style="color:#eceff4">(</span>t <span style="color:#81a1c1">*</span>testing<span style="color:#eceff4">.</span>T<span style="color:#eceff4">)</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>	tests <span style="color:#81a1c1">:=</span> <span style="color:#eceff4">[]</span><span style="color:#81a1c1;font-weight:bold">struct</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>		name   <span style="color:#81a1c1">string</span>
</span></span><span style="display:flex;"><span>		value1 <span style="color:#81a1c1">int</span>
</span></span><span style="display:flex;"><span>		value2 <span style="color:#81a1c1">int</span>
</span></span><span style="display:flex;"><span>		want   <span style="color:#81a1c1">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#eceff4">}{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>			name<span style="color:#eceff4">:</span>   <span style="color:#a3be8c">&#34;two positives&#34;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			value1<span style="color:#eceff4">:</span> <span style="color:#b48ead">2</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			value2<span style="color:#eceff4">:</span> <span style="color:#b48ead">2</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			want<span style="color:#eceff4">:</span>   <span style="color:#b48ead">4</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>		<span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>		<span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>			name<span style="color:#eceff4">:</span>   <span style="color:#a3be8c">&#34;negative and positive&#34;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			value1<span style="color:#eceff4">:</span> <span style="color:#81a1c1">-</span><span style="color:#b48ead">3</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			value2<span style="color:#eceff4">:</span> <span style="color:#b48ead">3</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			want<span style="color:#eceff4">:</span>   <span style="color:#b48ead">0</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>		<span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>		<span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>			name<span style="color:#eceff4">:</span>   <span style="color:#a3be8c">&#34;zero and positive&#34;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			value1<span style="color:#eceff4">:</span> <span style="color:#b48ead">0</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			value2<span style="color:#eceff4">:</span> <span style="color:#b48ead">10</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			want<span style="color:#eceff4">:</span>   <span style="color:#b48ead">10</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>		<span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>		<span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>			name<span style="color:#eceff4">:</span>   <span style="color:#a3be8c">&#34;negative and negative&#34;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			value1<span style="color:#eceff4">:</span> <span style="color:#81a1c1">-</span><span style="color:#b48ead">5</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			value2<span style="color:#eceff4">:</span> <span style="color:#81a1c1">-</span><span style="color:#b48ead">7</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>			want<span style="color:#eceff4">:</span>   <span style="color:#81a1c1">-</span><span style="color:#b48ead">12</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>		<span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>	<span style="color:#eceff4">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">for</span> _<span style="color:#eceff4">,</span> tt <span style="color:#81a1c1">:=</span> <span style="color:#81a1c1;font-weight:bold">range</span> tests <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>		t<span style="color:#eceff4">.</span><span style="color:#88c0d0">Run</span><span style="color:#eceff4">(</span>tt<span style="color:#eceff4">.</span>name<span style="color:#eceff4">,</span> <span style="color:#81a1c1;font-weight:bold">func</span><span style="color:#eceff4">(</span>t <span style="color:#81a1c1">*</span>testing<span style="color:#eceff4">.</span>T<span style="color:#eceff4">)</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">if</span> got <span style="color:#81a1c1">:=</span> <span style="color:#88c0d0">Add</span><span style="color:#eceff4">(</span>tt<span style="color:#eceff4">.</span>value1<span style="color:#eceff4">,</span> tt<span style="color:#eceff4">.</span>value2<span style="color:#eceff4">);</span> got <span style="color:#81a1c1">!=</span> tt<span style="color:#eceff4">.</span>want <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>				t<span style="color:#eceff4">.</span><span style="color:#88c0d0">Errorf</span><span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;Add() = %v, want %v&#34;</span><span style="color:#eceff4">,</span> got<span style="color:#eceff4">,</span> tt<span style="color:#eceff4">.</span>want<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>			<span style="color:#eceff4">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#eceff4">})</span>
</span></span><span style="display:flex;"><span>	<span style="color:#eceff4">}</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">}</span>
</span></span></code></pre></div><p>When I got around it, I decided this was the way I wanted to do testing from now on. This way of testing does not limit you in terms of parameter types or assertions and you can even define mocks as values if you require something like that.</p>
<p>Fast forward yesterday, I went into an old repository that I&rsquo;ve created on .NET for doing SOAP calls. And for some reason I went into the test class, and saw them&hellip; I was furious. The tests were using AutoFixture, and they were not understandable at all.</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#8fbcbb">[Theory(DisplayName = &#34;Post should do expected HTTP call&#34;)]</span>
</span></span><span style="display:flex;"><span><span style="color:#8fbcbb">[InlineDefaultData(typeof(ActionIsNullCustomization))]</span>
</span></span><span style="display:flex;"><span><span style="color:#8fbcbb">[InlineDefaultData(typeof(SoapVersion12Customization))]</span>
</span></span><span style="display:flex;"><span><span style="color:#8fbcbb">[InlineDefaultData(typeof(HeadersAreNullCustomization))]</span>
</span></span><span style="display:flex;"><span><span style="color:#8fbcbb">[InlineDefaultData(typeof(HeadersAreEmptyCustomization))]</span>
</span></span><span style="display:flex;"><span><span style="color:#8fbcbb">[InlineDefaultData(typeof(OnlyOneHeaderAndOneBodyCustomization))]</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">async</span> <span style="color:#81a1c1;font-weight:bold">void</span> PostAsync_ShouldDoExpectedHttpCall<span style="color:#eceff4">(</span>
</span></span><span style="display:flex;"><span>    Uri endpoint<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">string</span> action<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    SoapVersion soapVersion<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    List<span style="color:#eceff4">&lt;</span>XElement<span style="color:#eceff4">&gt;</span> bodies<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    List<span style="color:#eceff4">&lt;</span>XElement<span style="color:#eceff4">&gt;</span> headers<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">{</span> <span style="color:#eceff4">...</span> <span style="color:#eceff4">}</span>
</span></span></code></pre></div><p>And I am omitting the 15 lines of code that each customization took. How could I, at some point of my career, thought that this was a good way of testing things? But the good part here is learn from your own mistakes.</p>
<p>Tests are living documentation of your code, as long as you enforce them on your pipeline and don&rsquo;t disable them when you have to do a quick fix that ends up breaking everything. With that being said, tests should be easy to understand, and on .NET you can also keep it simple stupid.</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">static</span> IEnumerable<span style="color:#eceff4">&lt;</span><span style="color:#81a1c1">object</span><span style="color:#eceff4">[]&gt;</span> PostAsyncTestsData <span style="color:#eceff4">=&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">new</span> List<span style="color:#eceff4">&lt;</span><span style="color:#81a1c1">object</span><span style="color:#eceff4">[]&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#616e87;font-style:italic">// Action is null</span>
</span></span><span style="display:flex;"><span>        <span style="color:#81a1c1;font-weight:bold">new</span> <span style="color:#81a1c1">object</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span> Uri<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;https://test.com&#34;</span><span style="color:#eceff4">),</span>
</span></span><span style="display:flex;"><span>            SoapVersion<span style="color:#eceff4">.</span>Soap11<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span> <span style="color:#81a1c1;font-weight:bold">new</span> XElement<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;body1&#34;</span><span style="color:#eceff4">),</span> <span style="color:#81a1c1;font-weight:bold">new</span> XElement<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;body2&#34;</span><span style="color:#eceff4">)</span> <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span> <span style="color:#81a1c1;font-weight:bold">new</span> XElement<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;header1&#34;</span><span style="color:#eceff4">)</span> <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">null</span>
</span></span><span style="display:flex;"><span>        <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#616e87;font-style:italic">// Soap 12</span>
</span></span><span style="display:flex;"><span>        <span style="color:#81a1c1;font-weight:bold">new</span> <span style="color:#81a1c1">object</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span> Uri<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;https://test.com&#34;</span><span style="color:#eceff4">),</span>
</span></span><span style="display:flex;"><span>            SoapVersion<span style="color:#eceff4">.</span>Soap12<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span> <span style="color:#81a1c1;font-weight:bold">new</span> XElement<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;body1&#34;</span><span style="color:#eceff4">)</span> <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span> <span style="color:#81a1c1;font-weight:bold">new</span> XElement<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;header1&#34;</span><span style="color:#eceff4">),</span> <span style="color:#81a1c1;font-weight:bold">new</span> XElement<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;header2&#34;</span><span style="color:#eceff4">)</span> <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a3be8c">&#34;action&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#616e87;font-style:italic">// Headers are null</span>
</span></span><span style="display:flex;"><span>        <span style="color:#81a1c1;font-weight:bold">new</span> <span style="color:#81a1c1">object</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span> Uri<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;https://test.com&#34;</span><span style="color:#eceff4">),</span>
</span></span><span style="display:flex;"><span>            SoapVersion<span style="color:#eceff4">.</span>Soap12<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span> <span style="color:#81a1c1;font-weight:bold">new</span> XElement<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;body1&#34;</span><span style="color:#eceff4">)</span> <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">null</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a3be8c">&#34;action&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#616e87;font-style:italic">// Headers are empty</span>
</span></span><span style="display:flex;"><span>        <span style="color:#81a1c1;font-weight:bold">new</span> <span style="color:#81a1c1">object</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span> Uri<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;https://test.com&#34;</span><span style="color:#eceff4">),</span>
</span></span><span style="display:flex;"><span>            SoapVersion<span style="color:#eceff4">.</span>Soap12<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span> <span style="color:#81a1c1;font-weight:bold">new</span> XElement<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;body1&#34;</span><span style="color:#eceff4">)</span> <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span> XElement<span style="color:#eceff4">[]</span> <span style="color:#eceff4">{},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a3be8c">&#34;action&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#616e87;font-style:italic">// One header and one body</span>
</span></span><span style="display:flex;"><span>        <span style="color:#81a1c1;font-weight:bold">new</span> <span style="color:#81a1c1">object</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span> Uri<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;https://test.com&#34;</span><span style="color:#eceff4">),</span>
</span></span><span style="display:flex;"><span>            SoapVersion<span style="color:#eceff4">.</span>Soap11<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span> <span style="color:#81a1c1;font-weight:bold">new</span> XElement<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;body1&#34;</span><span style="color:#eceff4">)</span> <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#81a1c1;font-weight:bold">new</span><span style="color:#eceff4">[]</span> <span style="color:#eceff4">{</span> <span style="color:#81a1c1;font-weight:bold">new</span> XElement<span style="color:#eceff4">(</span><span style="color:#a3be8c">&#34;header1&#34;</span><span style="color:#eceff4">)</span> <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a3be8c">&#34;action&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#eceff4">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#eceff4">};</span>
</span></span><span style="display:flex;"><span><span style="color:#8fbcbb">
</span></span></span><span style="display:flex;"><span><span style="color:#8fbcbb">[Theory]</span>
</span></span><span style="display:flex;"><span><span style="color:#8fbcbb">[MemberData(nameof(PostAsyncTestsData))]</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">public</span> <span style="color:#81a1c1;font-weight:bold">async</span> <span style="color:#81a1c1;font-weight:bold">void</span> PostAsyncTests<span style="color:#eceff4">(</span>
</span></span><span style="display:flex;"><span>    Uri endpoint<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    SoapVersion version<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    IEnumerable<span style="color:#eceff4">&lt;</span>XElement<span style="color:#eceff4">&gt;</span> bodies<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    IEnumerable<span style="color:#eceff4">&lt;</span>XElement<span style="color:#eceff4">&gt;</span> headers<span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1">string</span> action<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span><span style="color:#eceff4">{</span> <span style="color:#eceff4">...</span> <span style="color:#eceff4">}</span>
</span></span></code></pre></div><p>The snippet above is relying in the parameter order, which is not necessarily intuitive, but there are some things that can make this better which I am not going to cover here.</p>
<p>The point I am trying to make here is don&rsquo;t over-engineer things just for the sake of trying a new cool framework or new tool, at least on your work environment. Your code should not be clever but be clear for your code inhabitants, in other words, your colleagues.</p>
<p>You are likely to get more engagement in testing and maintaining a healthy codebase when your tests are clear than when your colleagues don&rsquo;t understand what you are trying to do.</p>

    </div>
  </article>

  <hr />

  <div class="post-info">
    
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://devandchill.com/tags/test/">test</a></span>
        <span class="tag"><a href="https://devandchill.com/tags/kiss/">kiss</a></span>
        <span class="tag"><a href="https://devandchill.com/tags/yagni/">yagni</a></span>
        <span class="tag"><a href="https://devandchill.com/tags/autofixture/">autofixture</a></span>
        <span class="tag"><a href="https://devandchill.com/tags/.net/">.net</a></span>
        <span class="tag"><a href="https://devandchill.com/tags/go/">go</a></span>
        
    </p>

    

    <p>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="feather feather-file-text">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
        <polyline points="10 9 9 9 8 9"></polyline>
      </svg>
      1586 Words
    </p>

    <p>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="feather feather-calendar">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="16" y1="2" x2="16" y2="6"></line>
        <line x1="8" y1="2" x2="8" y2="6"></line>
        <line x1="3" y1="10" x2="21" y2="10"></line>
      </svg>
      
      2022-03-15 18:30 &#43;0100
      

      
      
      
    </p>
  </div>

  
  <div class="pagination">
    <div class="pagination__title">
      <span class="pagination__title-h">Read other posts</span>
      <hr />
    </div>

    <div class="pagination__buttons">
      
      <span class="button previous">
        <a href="https://devandchill.com/posts/2023/01/how-i-approach-microservice-testing-in-2023/">
          <span class="button__icon">←</span>
          <span class="button__text">How I approach microservice testing in 2023</span>
        </a>
      </span>
      

      
      <span class="button next">
        <a href="https://devandchill.com/posts/2022/01/set-up-the-same-terminal-regardless-your-os-and-more/">
          <span class="button__text">Set up the same terminal regardless your OS - and more</span>
          <span class="button__icon">→</span>
        </a>
      </span>
      
    </div>
  </div>
  

  
  

  
  

</main>

            </div>

            
                <footer class="footer">
    
    
</footer>

            
        </div>

        


<script type="text/javascript" src="/bundle.min.69fb501ac7bace7c0ca982d98573883fe084cb258084917289a51bc0bc04868a1b91b95a34c641d2854f64b4b0245430430f86fa70e19f7425062100c9b69215.js" integrity="sha512-aftQGse6znwMqYLZhXOIP&#43;CEyyWAhJFyiaUbwLwEhoobkblaNMZB0oVPZLSwJFQwQw&#43;G&#43;nDhn3QlBiEAybaSFQ=="></script>



    </body>
</html>
