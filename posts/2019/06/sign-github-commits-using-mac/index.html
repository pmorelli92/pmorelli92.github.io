<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Pablo Morelli">
<meta name="description" content="Devandchill is a coding blog where I share my ideas and insights on various programming topics." />
<meta name="keywords"
    content="blog, development, programming, tech, github, commits, ssh, gpg, verify, verified" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://devandchill.com/posts/2019/06/sign-github-commits-using-mac/" />


<title>
    
    Sign GitHub commits (using Mac) :: Dev &amp; Chill  — A blog about coding
    
</title>





<link rel="stylesheet" href="/main.3a0b97c6880e06dd6e902af4b4a6ae5146594dbe1d4035fd2190f9c6f7eb949d.css" integrity="sha256-OguXxogOBt1ukCr0tKauUUZZTb4dQDX9IZD5xvfrlJ0=">



    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">


<meta itemprop="name" content="Sign GitHub commits (using Mac)">
<meta itemprop="description" content="Generally speaking, most organisations do not check if a commit is signed or not. Even worse, more companies do not care about this. It might subjective but I like to have the verified badge.
If you commit from GitHub, for example: adding or editing a README, you will get the verified bagde. The same will happen with the client GitKraken, but if you commit using the git cli this will not happen unless you configure it."><meta itemprop="datePublished" content="2019-06-09T20:22:29+02:00" />
<meta itemprop="dateModified" content="2019-06-09T20:22:29+02:00" />
<meta itemprop="wordCount" content="853"><meta itemprop="image" content="https://devandchill.com/og-image.png"/>
<meta itemprop="keywords" content="github,commits,ssh,gpg,verify,verified," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://devandchill.com/og-image.png"/>

<meta name="twitter:title" content="Sign GitHub commits (using Mac)"/>
<meta name="twitter:description" content="Generally speaking, most organisations do not check if a commit is signed or not. Even worse, more companies do not care about this. It might subjective but I like to have the verified badge.
If you commit from GitHub, for example: adding or editing a README, you will get the verified bagde. The same will happen with the client GitKraken, but if you commit using the git cli this will not happen unless you configure it."/>







<meta property="article:published_time" content="2019-06-09 20:22:29 &#43;0200 CEST" />







<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138171880-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-138171880-1');
</script>





    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <img src="/dev-n-chill-logo.svg" alt="Dev &amp; Chill" />
        
    </div>
</a>


        <span class="header__right">
            
            <nav class="menu">
    <ul class="menu__inner"><li><a href="/blog">The blog</a></li><li><a href="/resume">Resume</a></li><li><a href="/posts">Posts</a></li>
    </ul>
</nav>

            <span class="menu-trigger">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M0 0h24v24H0z" fill="none" />
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
                </svg>
            </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
<main class="post">

  <div class="post-info">
    <p>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="feather feather-clock">
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 16 14"></polyline>
      </svg>
      5 minutes

      
    </p>
  </div>

  <article>
    <h1 class="post-title">
      <a href="https://devandchill.com/posts/2019/06/sign-github-commits-using-mac/">Sign GitHub commits (using Mac)</a>
    </h1>

    

    

    

    <div class="post-content">
      <p>Generally speaking, most organisations do not check if a commit is signed or not. Even worse, more companies do not care about this. It might subjective but I like to have the <code>verified</code> badge.</p>
<figure><img src="/posts/images/verified-commit.png"/>
</figure>

<p>If you commit from GitHub, for example: adding or editing a README, you will get the verified bagde. The same will happen with the client <code>GitKraken</code>, but if you commit using the <code>git cli</code> this will not happen unless you configure it.</p>
<p>Now, I will assume that you are using a mac but in case you do not, you can google yourself some of the installation steps.</p>
<h2 id="installing-gpg">Installing GPG</h2>
<p>In order to sign a commit you will need to generate a key, and for this you are going to use <a href="https://gnupg.org/"  target="_blank" rel="noreferrer noopener" >GPG</a>
. But first, you need brew to be installed, if you do not have it yet, it is a must have package manager for mac that you can download <a href="https://brew.sh/"  target="_blank" rel="noreferrer noopener" >here</a>
.</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; brew install gnupg
</span></span><span style="display:flex;"><span>&gt; brew install pinentry-mac
</span></span><span style="display:flex;"><span>&gt; <span style="color:#81a1c1">echo</span> <span style="color:#a3be8c">&#34;pinentry-program /usr/local/bin/pinentry-mac&#34;</span> &gt;&gt; ~/.gnupg/gpg-agent.conf
</span></span><span style="display:flex;"><span>&gt; killall gpg-agent
</span></span></code></pre></div><p><a href="https://www.gnupg.org/related_software/pinentry/index.en.html"  target="_blank" rel="noreferrer noopener" >Pinentry</a>
 as it is stated on the GPG site it is a collection of dialogs that allows you, for example, to input the passphrase of the private key. In order for this to work we need to indicate the path where it is installed into the GPG configuration and then kill the service (just in case) for it to take the changes.</p>
<h2 id="generating-a-set-of-keys">Generating a set of keys</h2>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; gpg --full-generate-key
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">(</span>you can customise the key creation or just press enter to use the defaults<span style="color:#81a1c1">)</span>
</span></span></code></pre></div><p>Will generate a private key from which you are going to generate and export the public key. The id of the key will be shown when you generate the key or you can fetch it by running:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; gpg --list-secret-keys
</span></span></code></pre></div><p>And you will get something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sec   rsa2048 2019-06-07 <span style="color:#81a1c1">[</span>SC<span style="color:#81a1c1">]</span>
</span></span><span style="display:flex;"><span>      KEY_ID_HERE
</span></span><span style="display:flex;"><span>uid   <span style="color:#81a1c1">[</span>  absolut <span style="color:#81a1c1">]</span> Pablo Morelli &lt;devandchill@gmail.com&gt;
</span></span><span style="display:flex;"><span>ssb   rsa2048 2019-06-07 <span style="color:#81a1c1">[</span>E<span style="color:#81a1c1">]</span>
</span></span></code></pre></div><p>After you have your ID, execute:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; gpg --export --armor YOUR_KEY_ID 2&gt; cat
</span></span></code></pre></div><p>You will see the public key on the terminal, now you can copy it and go to GitHub.</p>
<h2 id="adding-public-key-to-github-account">Adding public key to GitHub account</h2>
<p>Go to <code>Settings -&gt; SSH and GPG Keys -&gt; New GPG Key</code> and paste the content of your key and after submiting you will see something like this.</p>
<figure><img src="/posts/images/gpg-github.png"/>
</figure>

<h2 id="doing-your-first-verified-commit">Doing your first verified commit</h2>
<p>When you work with the <code>git cli</code> there is a huge probability that you work with different accounts (for example one for work and one personal) and/or that you have more than one GPG key on your system.
To avoid problems with git not knowing which configuration to pick you will indicate that for the repo where you are standing or for all the repos you will use the GPG key that contains a certain ID.</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; git config --local gpg.program <span style="color:#a3be8c">&#34;gpg&#34;</span>
</span></span><span style="display:flex;"><span>&gt; git config --local user.signingKey <span style="color:#a3be8c">&#34;YOUR_KEY_ID_INSIDE_THE_QUOTES&#34;</span> // will apply to the working directory
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; git config --global gpg.program <span style="color:#a3be8c">&#34;gpg&#34;</span>
</span></span><span style="display:flex;"><span>&gt; git config --global user.signingKey <span style="color:#a3be8c">&#34;YOUR_KEY_ID_INSIDE_THE_QUOTES&#34;</span> // will apply to the all the repositories except when overriden
</span></span></code></pre></div><p>You are almost ready to go, but you need to know that by default <code>git commit</code> does not sign the commits unless you specify the argument <code>-S</code>. So you have two options:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; git commit -S -m <span style="color:#a3be8c">&#34;My commit message&#34;</span>
</span></span></code></pre></div><p>Or you can setup automatic signing for the repository or all the repositories.</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; git config --local commit.gpgsign <span style="color:#a3be8c">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; git config --global commit.gpgsign <span style="color:#a3be8c">&#34;true&#34;</span> // <span style="color:#81a1c1;font-weight:bold">if</span> you want to <span style="color:#81a1c1">set</span> up <span style="color:#81a1c1;font-weight:bold">for</span> all the repositories
</span></span></code></pre></div><p>If you did the step above, the argument <code>-S</code> is no longer needed.</p>
<h2 id="checking-git-configuration">Checking git configuration</h2>
<p>When you are unsure about your configuration you can execute <code>git config --local -l</code> to list the configuration for the working directory and you should see something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gpg.program<span style="color:#81a1c1">=</span>gpg
</span></span><span style="display:flex;"><span>commit.gpgsign<span style="color:#81a1c1">=</span><span style="color:#81a1c1">true</span>
</span></span><span style="display:flex;"><span>user.signingkey<span style="color:#81a1c1">=</span>YOUR_KEY_ID
</span></span></code></pre></div><h2 id="back-up-your-private-key">Back up your private key</h2>
<p>Keys are passwords, so you should save them somewhere safe and revoke + change periodically.
It is trivial to revoke and to generate a new key for GitHub but it may be troublesome for some other systems that uses your public key.
Now lets image that you change your computer, you wont be able to sign because you don&rsquo;t have your key; in this case a backup is recommended.</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gpg --export-secret-keys YOUR_KEY_ID &gt; some_private_key_name
</span></span></code></pre></div><p>Now you can save this file to some secure vault, and if you ever need to import it on a new machine, execute:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gpg --import some_private_key_name
</span></span></code></pre></div><h2 id="bonus-track">Bonus track</h2>
<p>As I mentioned before, some times when you work using the <code>git cli</code> you end up mixing accounts, and it could happen to commit like this:</p>
<figure><img src="/posts/images/incorrect-user.png"/>
</figure>

<p>You can of course leave it like that or do a rebase of the commit; but you can also check first using <code>git config --local -l</code> which is the <code>user.name</code> and <code>user.email</code> for that working directory.
In case the email does not match with the email linked in GitHub you can change it doing:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt; git config --local user.name <span style="color:#a3be8c">&#34;GitHub name&#34;</span>
</span></span><span style="display:flex;"><span>&gt; git config --local user.email <span style="color:#a3be8c">&#34;my.github@email.com&#34;</span>
</span></span></code></pre></div><p>I hope you liked the post, if so, don&rsquo;t forget to share it so this can reach to more people :)</p>

    </div>
  </article>

  <hr />

  <div class="post-info">
    
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://devandchill.com/tags/github/">github</a></span>
        <span class="tag"><a href="https://devandchill.com/tags/commits/">commits</a></span>
        <span class="tag"><a href="https://devandchill.com/tags/ssh/">ssh</a></span>
        <span class="tag"><a href="https://devandchill.com/tags/gpg/">gpg</a></span>
        <span class="tag"><a href="https://devandchill.com/tags/verify/">verify</a></span>
        <span class="tag"><a href="https://devandchill.com/tags/verified/">verified</a></span>
        
    </p>

    

    <p>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="feather feather-file-text">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
        <polyline points="10 9 9 9 8 9"></polyline>
      </svg>
      853 Words
    </p>

    <p>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="feather feather-calendar">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="16" y1="2" x2="16" y2="6"></line>
        <line x1="8" y1="2" x2="8" y2="6"></line>
        <line x1="3" y1="10" x2="21" y2="10"></line>
      </svg>
      
      2019-06-09 20:22 &#43;0200
      

      
      
      
    </p>
  </div>

  
    <div class="pagination">
        
        <div class="pagination__title">
            <span class="pagination__title-h">Read other posts</span>
            <hr />
        </div>
        

        <div class="pagination__buttons">
            
            <span class="button previous">
                <a href="https://devandchill.com/posts/2019/06/net-core-3.0-publish-single-file-binary-on-alpine-container/">
                    <span class="button__icon">←</span>
                    <span class="button__text">NET Core 3.0 - Publish single file binary on alpine container</span>
                </a>
            </span>
            

            
            <span class="button next">
                <a href="https://devandchill.com/posts/2019/04/word-counter-sync-concurrent-or-streams/">
                    <span class="button__text">Word counter: Sync, concurrent or streams?</span>
                    <span class="button__icon">→</span>
                </a>
            </span>
            
        </div>
    </div>


  

  

</main>

            </div>

            
                <footer class="footer">
    
    
</footer>

            
        </div>

        


<script type="text/javascript" src="/bundle.min.aeeac2e3fc44c0f169410d068267bfbb1e20bd2201904f0598d7edc9bc0fea2b24912dbd3ff8f23aed618aab8a9e0b2d091cba7d09142aa77050ff84b88ab4f5.js" integrity="sha512-rurC4/xEwPFpQQ0Ggme/ux4gvSIBkE8FmNftybwP6iskkS29P/jyOu1hiquKngstCRy6fQkUKqdwUP&#43;EuIq09Q=="></script>



    </body>
</html>
